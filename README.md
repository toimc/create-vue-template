# Create Admin Vue3

[æ…•è¯¾ç½‘ã€Šå¤§å‰ç«¯2023ã€‹](https://class.imooc.com/sc/163/learn)å®è·µé¡¹ç›®ï¼Œä¸ºåŸºäºelement-pluså¼€å‘çš„Adminæ¨¡æ¿é¡¹ç›®ï¼Œåˆ›å»ºä¸€ä¸ªCLIå·¥å…·ã€‚

ä¸€ä¸ªç”¨äºå¿«é€Ÿåˆ›å»º Vue 3 ç®¡ç†åå°é¡¹ç›®çš„ CLI å·¥å…·ã€‚

## ç®€ä»‹

`create-admin-vue3` æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œå·¥å…·ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ­å»ºåŸºäº Vue 3 + Vite + TypeScript + Element Plus çš„ç®¡ç†åå°é¡¹ç›®ã€‚å®ƒæä¾›äº†ä¸°å¯Œçš„æ¨¡æ¿é€‰æ‹©å’Œè‡ªåŠ¨åŒ–é…ç½®ï¼Œè®©é¡¹ç›®åˆå§‹åŒ–å˜å¾—ç®€å•é«˜æ•ˆã€‚

é€šè¿‡é›†æˆå‰æ²¿çš„æŠ€æœ¯æ ˆå’Œè‡ªåŠ¨åŒ–é…ç½®ï¼Œå®ƒè®©é¡¹ç›®çš„å¯åŠ¨å’Œå¼€å‘æ›´åŠ è¿…é€Ÿå’Œé«˜æ•ˆã€‚

![image-20240129200112271](https://static.www.toimc.com/blog/picgo/2024/01/29/image-20240129200112271-a83282.webp)

## å¿«é€Ÿå¼€å§‹

å®‰è£…å¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ Vue é¡¹ç›®ï¼š

```bash
npm init vue-template@latest
```

æˆ–è€…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¿«é€Ÿåˆå§‹åŒ–ä¸€ä¸ªåä¸º `demo-vue` çš„é¡¹ç›®ï¼š

```bash
npm init vue-template@latest demo-vue -- -t
```

## æŠ€æœ¯æ ˆ

### CLI å·¥å…·æŠ€æœ¯æ ˆ
- **è¯­è¨€**: TypeScript 5.3.3
- **æ„å»ºå·¥å…·**: unbuild 2.0.0
- **æ¨¡æ¿å¼•æ“**: EJS 3.1.9
- **æ–‡ä»¶æ“ä½œ**: fs-extra 11.2.0
- **ç”¨æˆ·äº¤äº’**: prompts 2.4.2
- **å‘½ä»¤è¡Œè§£æ**: minimist 1.2.8
- **åŒ…ç®¡ç†**: pnpm 8.11.0

### ç”Ÿæˆé¡¹ç›®æŠ€æœ¯æ ˆ
æœ¬é¡¹ç›®åˆ©ç”¨æœ€æ–°çš„å‰ç«¯æŠ€æœ¯æ ˆï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

- âš¡ï¸ ä½¿ç”¨ [Vue 3](https://github.com/vuejs/core), [Vite](https://github.com/vitejs/vite), [pnpm](https://pnpm.io/), [esbuild](https://github.com/evanw/esbuild) ä¼˜åŒ–æ€§èƒ½ï¼›
- ğŸ—‚ åŸºäºæ–‡ä»¶çš„è·¯ç”±ç³»ç»Ÿï¼Œé›†æˆ `unplugin-vue-routerï¼›
- ğŸ“¦ è‡ªåŠ¨å¯¼å…¥ç»„ä»¶åŠŸèƒ½ï¼Œé›†æˆ `unplugin-vue-componentsï¼›
- ğŸ é€šè¿‡ Pinia è¿›è¡ŒçŠ¶æ€ç®¡ç†ï¼Œå‚è€ƒ [Pinia](https://pinia.vuejs.org/)ï¼›
- ğŸ“‘ é›†æˆ `vite-plugin-vue-layouts` å®ç°å¸ƒå±€ç³»ç»Ÿï¼›
- ğŸ“² (å¯é€‰)PWA æ”¯æŒï¼Œä½¿ç”¨ `vite-plugin-pwa`ï¼›
- ğŸ¨ ä½¿ç”¨ [UnoCSS](https://github.com/antfu/unocss) â€”â€” å³æ—¶çš„åŸå­ CSS å¼•æ“ï¼›
- ğŸ˜ƒ ä½¿ç”¨ç±»åä»ä»»ä½•å›¾æ ‡é›†åˆä¸­ä½¿ç”¨å›¾æ ‡ï¼Œå‚è€ƒ [unplugin-icons](https://github.com/antfu/unplugin-icons)ï¼›
- ğŸŒ å›½é™…åŒ–å‡†å¤‡å°±ç»ªï¼Œç½‘ç»œæ–¹å¼åŠ è½½ï¼›
- ğŸ“¥ è‡ªåŠ¨å¯¼å…¥ APIï¼Œé›†æˆ `unplugin-auto-import` â€”â€” è‡ªåŠ¨åŠ è½½ Composition API å’Œå¸¸ç”¨åº“ï¼›
- ğŸ¦” é›†æˆ Jenkinsã€GitHub Actions å®ç°è‡ªåŠ¨åŒ–éƒ¨ç½²ï¼›
- ğŸ”¤ å®¹å™¨åŒ– Docker é›†æˆï¼›
- ğŸ¦¾ å…¨éƒ¨ä½¿ç”¨ TypeScript ç¼–å†™ï¼›
- âš™ï¸ é›†æˆ [Vitest](https://github.com/vitest-dev/vitest) è¿›è¡Œå•å…ƒæµ‹è¯•ï¼Œ[Cyress](https://cypress.io/) è¿›è¡Œ E2E æµ‹è¯•ï¼›
- â˜ï¸ å¯ç›´æ¥éƒ¨ç½²è‡³ Netlifyï¼Œé›¶é…ç½®ï¼›

## ç¯å¢ƒè¦æ±‚

- Node.js >= 18.0.0
- pnpm >= 8.11.0

## é…ç½®

### ç›®å½•ç»“æ„

```
create-admin-vue3/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ index.ts              # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ templates/                # é¡¹ç›®æ¨¡æ¿
â”‚   â””â”€â”€ base/                 # åŸºç¡€æ¨¡æ¿
â”‚       â”œâ”€â”€ src/              # æºç æ¨¡æ¿
â”‚       â”œâ”€â”€ public/           # å…¬å…±èµ„æºæ¨¡æ¿
â”‚       â”œâ”€â”€ package.json      # åŒ…é…ç½®æ¨¡æ¿
â”‚       â”œâ”€â”€ vite.config.ts    # Viteé…ç½®æ¨¡æ¿
â”‚       â”œâ”€â”€ tsconfig.json     # TypeScripté…ç½®æ¨¡æ¿
â”‚       â””â”€â”€ ...               # å…¶ä»–é…ç½®æ–‡ä»¶æ¨¡æ¿
â”œâ”€â”€ build.config.ts           # æ„å»ºé…ç½®
â”œâ”€â”€ package.json              # é¡¹ç›®é…ç½®
â””â”€â”€ README.md                 # é¡¹ç›®æ–‡æ¡£
```

### æ¨¡æ¿é…ç½®
- æ”¯æŒå¤šç§é¡¹ç›®ç±»å‹é€‰æ‹©
- å¯é€‰çš„é›†æˆåŠŸèƒ½é…ç½®
- è‡ªåŠ¨åŒ–çš„ä¾èµ–å®‰è£…
- å®Œæ•´çš„é¡¹ç›®ç»“æ„ç”Ÿæˆ

## æ ¸å¿ƒåŠŸèƒ½

### 1. é¡¹ç›®åˆå§‹åŒ–
- äº¤äº’å¼é¡¹ç›®é…ç½®
- æ¨¡æ¿é€‰æ‹©
- ä¾èµ–è‡ªåŠ¨å®‰è£…
- é¡¹ç›®ç»“æ„ç”Ÿæˆ

### 2. æ¨¡æ¿ç³»ç»Ÿ
- åŸºäº EJS çš„æ¨¡æ¿å¼•æ“
- æ”¯æŒæ¡ä»¶æ¸²æŸ“
- å˜é‡æ›¿æ¢
- æ–‡ä»¶å¤åˆ¶å’Œé‡å‘½å

### 3. é…ç½®é€‰é¡¹
- **åŸºç¡€é…ç½®**: é¡¹ç›®åç§°ã€æè¿°ã€ä½œè€…
- **æŠ€æœ¯æ ˆé€‰æ‹©**: Vue 3ã€TypeScriptã€Element Plus
- **åŠŸèƒ½é›†æˆ**: PWAã€Electronã€CDNã€Mock
- **æ ·å¼æ–¹æ¡ˆ**: UnoCSSã€Sassã€CSS Modules
- **æµ‹è¯•æ¡†æ¶**: Vitestã€Cypress

### 4. è‡ªåŠ¨åŒ–åŠŸèƒ½
- ä¾èµ–ç‰ˆæœ¬ç®¡ç†
- é…ç½®æ–‡ä»¶ç”Ÿæˆ
- ç›®å½•ç»“æ„åˆ›å»º
- Git ä»“åº“åˆå§‹åŒ–

## è„šæœ¬è¯´æ˜

### å¼€å‘æ¨¡å¼
```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm start

# ç›‘å¬æ¨¡å¼å¼€å‘
pnpm dev
```

### æ„å»ºå‘å¸ƒ
```bash
# æ„å»ºé¡¹ç›®
pnpm build

# å¼€å‘æ¨¡å¼æ„å»º
pnpm build:dev

# å‘å¸ƒåˆ° npm
pnpm release
```

### ä»£ç è´¨é‡
```bash
# ä»£ç æ£€æŸ¥
pnpm lint

# ä»£ç æ ¼å¼åŒ–
pnpm format
```

## ä½¿ç”¨æ–¹æ³•

### å…¨å±€å®‰è£…
```bash
# å®‰è£… CLI å·¥å…·
npm install -g create-admin-vue3

# åˆ›å»ºæ–°é¡¹ç›®
create-admin-vue3 my-project
```

### ç›´æ¥ä½¿ç”¨
```bash
# ä½¿ç”¨ npx ç›´æ¥è¿è¡Œ
npx create-admin-vue3 my-project

# æŒ‡å®šæ¨¡æ¿
npx create-admin-vue3 my-project --template base
```

### äº¤äº’å¼é…ç½®
è¿è¡Œå‘½ä»¤åï¼ŒCLI ä¼šå¼•å¯¼ä½ å®Œæˆä»¥ä¸‹é…ç½®ï¼š

1. **é¡¹ç›®ä¿¡æ¯**
   - é¡¹ç›®åç§°
   - é¡¹ç›®æè¿°
   - ä½œè€…ä¿¡æ¯
   - è®¸å¯è¯ç±»å‹

2. **æŠ€æœ¯æ ˆé€‰æ‹©**
   - Vue 3 ç‰ˆæœ¬
   - TypeScript æ”¯æŒ
   - UI æ¡†æ¶é€‰æ‹©
   - çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ

3. **åŠŸèƒ½é›†æˆ**
   - PWA æ”¯æŒ
   - Electron æ¡Œé¢åº”ç”¨
   - CDN åŠ é€Ÿ
   - Mock æ•°æ®

4. **å¼€å‘å·¥å…·**
   - ä»£ç æ£€æŸ¥å·¥å…·
   - æµ‹è¯•æ¡†æ¶
   - æ„å»ºå·¥å…·é…ç½®

## æ¨¡æ¿è¯´æ˜

### åŸºç¡€æ¨¡æ¿ (base)
åŒ…å«å®Œæ•´çš„ Vue 3 ç®¡ç†åå°é¡¹ç›®ç»“æ„ï¼š

- å®Œæ•´çš„ç›®å½•ç»“æ„
- åŸºç¡€ç»„ä»¶å’Œé¡µé¢
- è·¯ç”±é…ç½®
- çŠ¶æ€ç®¡ç†
- æ ·å¼é…ç½®
- æ„å»ºé…ç½®

### æ¨¡æ¿ç‰¹æ€§
- å“åº”å¼è®¾è®¡
- æš—è‰²/äº®è‰²ä¸»é¢˜
- å›½é™…åŒ–æ”¯æŒ
- ç»„ä»¶åº“é›†æˆ
- å¼€å‘å·¥å…·é…ç½®

## Templateé¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ Dockerfile
â”œâ”€â”€ Dockerfile-dev
â”œâ”€â”€ Dockerfile-prod
â”œâ”€â”€ Jenkinsfile
â”œâ”€â”€ README.md
â”œâ”€â”€ cypress
â”‚   â”œâ”€â”€ e2e
â”‚   â”œâ”€â”€ fixtures
â”‚   â””â”€â”€ support
â”œâ”€â”€ cypress.config.ts
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ env.d.ts
â”œâ”€â”€ index.html
â”œâ”€â”€ netlify.toml
â”œâ”€â”€ nginx
â”‚   â”œâ”€â”€ conf.d
â”‚   â””â”€â”€ nginx.conf
â”œâ”€â”€ package.json
â”œâ”€â”€ pnpm-lock.yaml
â”œâ”€â”€ public
â”‚   â”œâ”€â”€ favicon.ico
â”‚   â”œâ”€â”€ font_1791095_hy6b9xbrdsk.css
â”‚   â””â”€â”€ locales
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ App.vue
â”‚   â”œâ”€â”€ assets
â”‚   â”œâ”€â”€ layouts
â”‚   â”œâ”€â”€ main.ts
â”‚   â”œâ”€â”€ pages
â”‚   â”œâ”€â”€ router
â”‚   â”œâ”€â”€ shims.d.ts
â”‚   â”œâ”€â”€ store
â”‚   â””â”€â”€ utils
â”œâ”€â”€ tsconfig.app.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â”œâ”€â”€ tsconfig.vitest.json
â”œâ”€â”€ uno.config.ts
â”œâ”€â”€ vite.config.ts
â””â”€â”€ vitest.config.ts
```

## å¼€å‘æŒ‡å—

### æ·»åŠ æ–°æ¨¡æ¿
1. åœ¨ `templates/` ç›®å½•ä¸‹åˆ›å»ºæ–°æ¨¡æ¿ç›®å½•
2. æ·»åŠ æ¨¡æ¿æ–‡ä»¶å’Œé…ç½®
3. åœ¨ `src/index.ts` ä¸­æ³¨å†Œæ–°æ¨¡æ¿
4. æ›´æ–°æ¨¡æ¿é€‰æ‹©é€»è¾‘

### è‡ªå®šä¹‰é…ç½®
1. ä¿®æ”¹ `src/index.ts` ä¸­çš„é…ç½®é€‰é¡¹
2. æ›´æ–°æ¨¡æ¿æ–‡ä»¶ä¸­çš„å˜é‡
3. è°ƒæ•´æ„å»ºå’Œå‘å¸ƒæµç¨‹

### æ¨¡æ¿å˜é‡
æ¨¡æ¿æ”¯æŒä»¥ä¸‹å˜é‡ï¼š
- `projectName`: é¡¹ç›®åç§°
- `projectDescription`: é¡¹ç›®æè¿°
- `author`: ä½œè€…ä¿¡æ¯
- `features`: é€‰ä¸­çš„åŠŸèƒ½åˆ—è¡¨
- `dependencies`: ä¾èµ–åŒ…åˆ—è¡¨

## å‘å¸ƒæµç¨‹

### ç‰ˆæœ¬ç®¡ç†
1. æ›´æ–° `package.json` ä¸­çš„ç‰ˆæœ¬å·
2. æ›´æ–° `CHANGELOG.md`
3. æäº¤ä»£ç å¹¶æ‰“æ ‡ç­¾

### å‘å¸ƒæ­¥éª¤
1. æ„å»ºé¡¹ç›®ï¼š`pnpm build`
2. å‘å¸ƒåˆ° npmï¼š`pnpm release`
3. éªŒè¯å‘å¸ƒç»“æœ


## ä½œè€…

toimc <brian@toimc.com>

## ä»“åº“åœ°å€

https://github.com/toimc/create-vue-template